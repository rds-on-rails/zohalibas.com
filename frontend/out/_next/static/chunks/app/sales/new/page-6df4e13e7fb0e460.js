(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[286],{4405:function(e,a,l){Promise.resolve().then(l.bind(l,2502))},2502:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return NewSalePage}});var s=l(7437),t=l(2265),n=l(1396),i=l.n(n),r=l(4300);function NewSalePage(){let[e,a]=t.useState(null),[l,n]=t.useState(""),[c,d]=t.useState(1),[u,o]=t.useState(0),[x,m]=t.useState("cash"),[h,f]=t.useState(""),[p,g]=t.useState(!1),j=c*u,handleSubmit=async e=>{e.preventDefault(),g(!0);try{let e=await fetch("/api/sales",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({itemName:l,quantity:c,price:u,paymentMode:x,workerName:h})});if(!e.ok){let a=await e.text();alert("Failed to save: ".concat(a));return}alert("Sale saved successfully"),n(""),d(1),o(0),f(""),a(null)}finally{g(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,s.jsx)("header",{className:"border-b border-gray-200",children:(0,s.jsx)("div",{className:"max-w-2xl mx-auto px-4 py-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(i(),{href:"/",className:"text-gray-600 hover:text-gray-900",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Add Sale"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Record a new sale transaction"})]})]})})}),(0,s.jsx)("main",{className:"max-w-2xl mx-auto px-4 py-8",children:(0,s.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Item Name"}),(0,s.jsx)("input",{className:"input-field",value:l,onChange:e=>n(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Quantity"}),(0,s.jsx)("input",{type:"number",min:1,className:"input-field",value:c,onChange:e=>d(Number(e.target.value||0)),required:!0})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Unit Price"}),(0,s.jsx)("input",{type:"number",min:0,step:"0.01",className:"input-field",value:u,onChange:e=>o(Number(e.target.value||0)),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Payment Mode"}),(0,s.jsxs)("select",{className:"input-field",value:x,onChange:e=>m(e.target.value),children:[(0,s.jsx)("option",{value:"cash",children:"Cash"}),(0,s.jsx)("option",{value:"online",children:"Online"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Worker Name"}),(0,s.jsx)("input",{className:"input-field",value:h,onChange:e=>f(e.target.value),required:!0})]}),(0,s.jsx)("div",{children:(0,s.jsx)(r.Z,{label:"Attach Photo (optional)",value:e,onFileSelected:a})}),(0,s.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-lg font-medium text-gray-700",children:"Total Amount:"}),(0,s.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:["$",isFinite(j)?j.toFixed(2):"0.00"]})]})}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)(i(),{href:"/",className:"btn-secondary",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:p,className:"btn-primary",children:p?"Saving...":"Save Sale"})]})]})})]})}},4300:function(e,a,l){"use strict";l.d(a,{Z:function(){return PhotoCapture}});var s=l(7437),t=l(2265);function PhotoCapture(e){let{label:a="Add Photo",onFileSelected:l,value:n}=e,i=t.useRef(null);return(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:a}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("input",{ref:i,type:"file",accept:"image/*",capture:"environment",onChange:e=>{var a,s;return l(null!==(s=null===(a=e.target.files)||void 0===a?void 0:a[0])&&void 0!==s?s:null)},className:"block w-full text-sm text-gray-900 file:mr-4 file:rounded-md file:border-0 file:bg-gray-100 file:px-4 file:py-2 file:text-sm file:font-medium file:text-gray-700 hover:file:bg-gray-200"}),n?(0,s.jsx)("span",{className:"text-xs text-gray-500 truncate max-w-[160px]",children:n.name}):null]})]})}}},function(e){e.O(0,[176,971,472,744],function(){return e(e.s=4405)}),_N_E=e.O()}]);